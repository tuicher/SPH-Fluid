#version 460
layout(local_size_x = 128) in;

layout(std430, binding = 2) buffer BitMask {
    uint bits[];
};

layout(std430, binding = 6) buffer Counter {
    uint counter[]; // counter[0] = total bits con valor 1
};

void main()
{
    uint i = gl_GlobalInvocationID.x;

    if (bits[i] == 1u) {
        atomicAdd(counter[0], 1u);
    }
}
